{% extends "base.html" %}

{% block title %}Регистрация в СтройМаг{% endblock %}

{% block content %}

<div class="page-center">
    <div class="form-container">
        <h2>Регистрация в СтройМаг</h2>
        <form action="/auth/register/redirect" method="post">
            <div class="form-group">
                <label>Фамилия:</label>
                <input type="text" name="last_name" placeholder="введите фамилию"
                       value="{{ request.query_params.get('last_name', '') }}" required>
            </div>
            <div class="form-group">
                <label>Имя:</label>
                <input type="text" name="first_name" placeholder="введите имя"
                       value="{{ request.query_params.get('first_name', '') }}" required>
            </div>
            <div class="form-group">
                <label>Отчество:</label>
                <input type="text" name="patronymic" placeholder="введите отчество"
                       value="{{ request.query_params.get('patronymic', '') }}">
            </div>
            <div class="form-group">
                <label>Email:</label>
                <input type="email" name="email" placeholder="example@yandex.com"
                       value="{{ request.query_params.get('email', '') }}" required>
            </div>
            <div class="form-group">
                <label>Мобильный телефон:</label>
                <input
                    type="tel"
                    name="phone"
                    placeholder="введите телефон"
                    title="Можно вводить в любом формате"
                    value="{{ request.query_params.get('phone', '') }}"
                    required
                >
            </div>
            <div class="form-group">
                <label>Пароль:</label>
                <input type="password" name="password" placeholder="введите пароль" minlength="8" required>
            </div>
            <div class="form-group">
                <label>Повторите пароль:</label>
                <input type="password" name="password_confirm" placeholder="повторите пароль" minlength="6" required>
            </div>
            <input type="hidden" name="role" value="CLIENT">
            <button type="submit" class="btn btn-custom">Зарегистрироваться</button>

            <div class="login-footer">
                Уже есть аккаунт? <a href="/auth/login">Войти</a>
            </div>
        </form>

        {% if request.query_params.get('error') %}
        <div class="alert alert-error">
            Ошибка: {{ request.query_params.get('error') }}
        </div>
        {% endif %}

        {% if request.query_params.get('message') %}
        <div class="alert alert-success">
            {{ request.query_params.get('message') }}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
