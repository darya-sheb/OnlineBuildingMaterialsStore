{% extends "base.html" %}

{% block title %}Корзина - СтройМаг{% endblock %}

{% block content %}
<h2>Корзина покупок</h2>

{% if not cart_items %}
    <p>Ваша корзина пуста :(</p>
    <a href="products/catalog" class="btn btn-secondary">Перейти в каталог</a>
{% else %}
    <div class="cart-items">
        {% for item in cart_items %}
        <div class="cart-item" data-cart-item-id="{{ item.id }}">
            <div class="item-info">
                <h3>{{ item.name }}</h3>
                <p>Цена: <strong>{{ item.price }} руб/{{ item.unit }}</strong></p>
            </div>

            <div class="item-quantity">
                <label>Количество:</label>
                <input type="number" class="quantity-input" value="{{ item.quantity }}" min="1" data-cart-item-id="{{ item.id }}">
                <span>{{ item.unit }}</span>
            </div>

            <div class="item-total">
                <p><strong>{{ item.price * item.quantity }} руб</strong></p>
            </div>

            <div class="item-remove">
                <button class="remove-item" data-cart-item-id="{{ item.id }}">Удалить</button>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="total">
        <p><strong>Итого: <span id="total-price">{{ total }}</span> руб</strong></p>
    </div>

    <div class="order-actions">
        <a href="/orders/checkout" class="btn btn-primary">Оформить заказ</a>
        <a href="/products" class="btn btn-secondary">Продолжить покупки</a>
    </div>
{% endif %}
{% endblock %}
